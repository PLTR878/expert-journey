<!doctype html>
<html lang="th">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PLTR AI Super Investor Dashboard</title>
<style>
body {
  font-family: system-ui;
  background: #0b0f17;
  color: #e5e7eb;
  margin: 0;
  padding-bottom: 5rem;
}
header {
  background: #111827;
  padding: 1rem;
  text-align: center;
  font-size: 1.3rem;
  font-weight: bold;
}
section {
  padding: 1rem;
}
.card {
  background: #1f2937;
  border-radius: 14px;
  margin-bottom: 1.2rem;
  padding: 1rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}
.stock {
  border: 1px solid #374151;
  border-radius: 10px;
  padding: 0.7rem;
  margin-bottom: 0.6rem;
  background: #111827;
}
.stock h4 {
  margin: 0 0 0.3rem 0;
  color: #60a5fa;
}
.stock small {
  color: #9ca3af;
}
.value {
  font-weight: bold;
  color: #22d3ee;
}
.refresh-btn {
  background: #2563eb;
  border: none;
  color: #fff;
  padding: 0.4rem 0.8rem;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.8rem;
  float: right;
}
.refresh-btn:hover {
  background: #1d4ed8;
}
h3 {
  margin: 0 0 0.6rem 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
</style>
</head>
<body>
<header>üíé PLTR AI Super Investor Dashboard</header>

<section id="daily" class="card">
  <h3>üìà ‡∏´‡∏∏‡πâ‡∏ô‡πÄ‡∏î‡πà‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ 
    <button class="refresh-btn" onclick="loadDaily()">üîÑ ‡∏™‡πÅ‡∏Å‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
  </h3>
  <div id="dailyOut">Loading...</div>
</section>

<section id="long" class="card">
  <h3>üöÄ ‡∏´‡∏∏‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏ô‡πâ‡∏≥ ‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡πÑ‡∏Å‡∏• 
    <button class="refresh-btn" onclick="loadLong()">üîÑ ‡∏™‡πÅ‡∏Å‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
  </h3>
  <div id="longOut">Loading...</div>
</section>

<section id="port" class="card">
  <h3>üí∞ ‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏à‡∏≥‡∏•‡∏≠‡∏á (‡∏ó‡∏∏‡∏ô 10,000 ‡∏ö‡∏≤‡∏ó)
    <button class="refresh-btn" onclick="loadPort()">üîÑ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï</button>
  </h3>
  <div id="portOut">Loading...</div>
</section>

<script>
async function loadDaily() {
  document.getElementById('dailyOut').innerHTML = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πÅ‡∏Å‡∏ô...";
  const r = await fetch('/api/daily');
  const d = await r.json();
  let html = '';
  d.items.forEach(x => {
    html += `
      <div class="stock">
        <h4>${x.symbol}</h4>
        <small>‡∏£‡∏≤‡∏Ñ‡∏≤: <span class="value">${x.price.toFixed(2)}</span></small><br>
        <small>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏î‡πà‡∏ô: <span class="value">${x.score}</span></small>
      </div>`;
  });
  document.getElementById('dailyOut').innerHTML = html;
}

async function loadLong() {
  document.getElementById('longOut').innerHTML = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πÅ‡∏Å‡∏ô...";
  const r = await fetch('/api/longterm');
  const d = await r.json();
  let html = '';
  d.items.forEach(x => {
    html += `
      <div class="stock">
        <h4>${x.symbol}</h4>
        <small>‡∏Å‡∏•‡∏∏‡πà‡∏°: ${x.sector}</small><br>
        <small>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï: <span class="value">${x.score}</span></small>
      </div>`;
  });
  document.getElementById('longOut').innerHTML = html;
}

async function loadPort() {
  document.getElementById('portOut').innerHTML = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì...";
  const r = await fetch('/api/portfolio');
  const d = await r.json();
  let html = `<p>‡∏ó‡∏∏‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: <span class="value">${d.capital}</span> ‡∏ö‡∏≤‡∏ó</p>`;
  d.portfolio.forEach(x => {
    html += `
      <div class="stock">
        <h4>${x.symbol}</h4>
        <small>‡∏ñ‡∏∑‡∏≠: ${x.hold}</small><br>
        <small>‡∏£‡∏≤‡∏Ñ‡∏≤: <span class="value">${x.price.toFixed(2)}</span></small><br>
        <small>‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤: <span class="value">${x.value.toFixed(2)}</span></small>
      </div>`;
  });
  html += `<p>‡∏£‡∏ß‡∏°‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤: <span class="value">${d.total.toFixed(2)}</span> ‡∏ö‡∏≤‡∏ó<br>
  üíπ ‡∏Å‡∏≥‡πÑ‡∏£: <span class="value">${d.profit}</span> ‡∏ö‡∏≤‡∏ó</p>`;
  document.getElementById('portOut').innerHTML = html;
}

// ‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤
loadDaily();
loadLong();
loadPort();
</script>
</body>
</html>
